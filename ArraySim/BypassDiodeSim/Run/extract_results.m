function [] = extract_results(outCsv, resultCsv, numFolders, numRows)
% Extract the result files from each m<num> folder assuming they were
% generated  with equal distribution of all rows
% @param outCsv: Name of csv generated by each folder
% @param resultCsv: Total output
% @param numFolders: Number of folders

  BasePath = pwd;
  start_index = 1;
  end_index = 1;
  step_size = round(numRows / numFolders);
  result = zeros(numRows, 1);

  for iDir = 1:numFolders
    aDir = fullfile(BasePath, "/", strcat("m", int2str(iDir)));
    disp(aDir);
    cd(aDir);
    end_index = start_index+step_size;

    if iDir == numFolders
        end_index = numRows;
    end
    
    diode_csv = readmatrix(outCsv);
    result(start_index:end_index) = diode_csv(start_index:end_index);
  
    start_index = end_index + 1; 
  end

  writematrix(result, resultCsv);
end